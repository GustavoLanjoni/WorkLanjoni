<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/login_cadastro.css">
    <title>Sistema de Cadastro, Login e Recuperação</title>
    <style>
        .tela-empresa,
        .tela-usuario,
        .recuperacao-senha,
        .recuperacao-email,
        .cadastro {
            display: none;
        }
    </style>
</head>

<body>

    <!-- Tela de Login -->
    <div id="login">
        <h2>Login</h2>
        <label for="usuario-login">Usuário:</label>
        <input type="text" id="usuario-login" placeholder="Nome de Usuário">
        <br><br>
        <label for="senha-login">Senha:</label>
        <input type="password" id="senha-login" placeholder="Senha">
        <br><br>
        <button onclick="fazerLogin()">Entrar</button>
        <br><br>
        <button onclick="mostrarRecuperacaoSenha()">Esqueci a Senha</button>
        <button onclick="mostrarRecuperacaoEmail()">Esqueci o E-mail</button>
        <br><br>
        <button onclick="mostrarCadastro()">Criar Conta</button>
    </div>

    <!-- Tela de Cadastro -->
    <div id="cadastro" class="cadastro">
        <h2>Cadastro</h2>
        <label for="usuario-cadastro">Nome de Usuário:</label>
        <input type="text" id="usuario-cadastro" placeholder="Nome de Usuário">
        <br><br>
        <label for="senha-cadastro">Senha:</label>
        <input type="password" id="senha-cadastro" placeholder="Senha">
        <br><br>
        <label for="email-cadastro">E-mail:</label>
        <input type="email" id="email-cadastro" placeholder="E-mail">
        <br><br>
        <label for="tipo-usuario-cadastro">Tipo de Usuário:</label>
        <select id="tipo-usuario-cadastro">
            <option value="usuario">Usuário</option>
            <option value="empresa">Empresa</option>
        </select>
        <br><br>
        <label for="resposta-pergunta-cadastro">Qual é o nome do seu primeiro animal de estimação?</label>
        <input type="text" id="resposta-pergunta-cadastro" placeholder="Resposta">
        <br><br>
        <button onclick="registrarUsuario()">Cadastrar</button>
        <button onclick="voltarLogin()">Voltar ao Login</button>
    </div>

    <!-- Tela de Recuperação de Senha -->
    <div id="recuperacao-senha" class="recuperacao-senha">
        <h2>Recuperação de Senha</h2>
        <label for="usuario-recuperacao">Nome de Usuário:</label>
        <input type="text" id="usuario-recuperacao" placeholder="Nome de Usuário">
        <br><br>
        <label for="resposta-pergunta">Qual é o nome do seu primeiro animal de estimação?</label>
        <input type="text" id="resposta-pergunta" placeholder="Resposta">
        <br><br>
        <button onclick="recuperarSenha()">Recuperar Senha</button>
        <button onclick="voltarLogin()">Voltar ao Login</button>
    </div>

    <!-- Tela de Recuperação de E-mail -->
    <div id="recuperacao-email" class="recuperacao-email">
        <h2>Recuperação de E-mail</h2>
        <label for="usuario-recuperacao-email">Nome de Usuário:</label>
        <input type="text" id="usuario-recuperacao-email" placeholder="Nome de Usuário">
        <br><br>
        <button onclick="recuperarEmail()">Recuperar E-mail</button>
        <button onclick="voltarLogin()">Voltar ao Login</button>
    </div>

    <!-- Tela da Empresa -->
    <div id="tela-empresa" class="tela-empresa">
        <h2>Bem-vindo à Tela da Empresa</h2>
        <p>Aqui você pode gerenciar as informações da empresa.</p>
        <button onclick="voltarLogin()">Sair</button>
    </div>

    <!-- Tela do Usuário -->
    <div id="tela-usuario" class="tela-usuario">
        <h2>Bem-vindo à Tela do Usuário</h2>
        <p>Aqui você pode ver as informações disponíveis para o usuário.</p>
        <button onclick="voltarLogin()">Sair</button>
    </div>

    <script>
        // Função de Login
        function fazerLogin() {
            const usuario = document.getElementById('usuario-login').value;
            const senha = document.getElementById('senha-login').value;

            const usuarioData = localStorage.getItem(usuario);

            if (usuarioData) {
                const usuarioObjeto = JSON.parse(usuarioData);

                if (usuarioObjeto.senha === senha) {
                    document.getElementById('login').style.display = 'none';

                    if (usuarioObjeto.tipoUsuario === 'empresa') {
                        // Redireciona para a página da empresa
                        window.location.href = "telaEmpresa.html"; // Alterado para telaEmpresa.html
                    } else if (usuarioObjeto.tipoUsuario === 'usuario') {
                        // Redireciona para a tela do usuário
                        window.location.href = "telaUsuario.html";
                    }
                } else {
                    alert('Senha incorreta!');
                }
            } else {
                alert('Usuário não encontrado!');
            }
        }


        // Função para mostrar a tela de cadastro
        function mostrarCadastro() {
            document.getElementById('login').style.display = 'none';
            document.getElementById('cadastro').style.display = 'block';
        }

        // Função para registrar usuário
        function registrarUsuario() {
            const usuario = document.getElementById('usuario-cadastro').value;
            const senha = document.getElementById('senha-cadastro').value;
            const email = document.getElementById('email-cadastro').value;
            const tipoUsuario = document.getElementById('tipo-usuario-cadastro').value;
            const respostaSeguranca = document.getElementById('resposta-pergunta-cadastro').value;

            const novoUsuario = { usuario, senha, email, tipoUsuario, respostaSeguranca };

            localStorage.setItem(usuario, JSON.stringify(novoUsuario));

            alert('Cadastro realizado com sucesso!');

            // Redireciona para a tela correta após o cadastro
            if (tipoUsuario === 'usuario') {
                window.location.href = "telaUsuario.html"; // Redireciona para telaUsuario.html
            } else {
                document.getElementById('cadastro').style.display = 'none';
                document.getElementById('login').style.display = 'block';
            }
        }

        // Função de recuperação de senha
        function recuperarSenha() {
            const usuario = document.getElementById('usuario-recuperacao').value;
            const resposta = document.getElementById('resposta-pergunta').value;

            const usuarioData = localStorage.getItem(usuario);

            if (usuarioData) {
                const usuarioObjeto = JSON.parse(usuarioData);

                if (usuarioObjeto.respostaSeguranca && usuarioObjeto.respostaSeguranca === resposta) {
                    alert('Sua senha é: ' + usuarioObjeto.senha);
                } else {
                    alert('Resposta incorreta!');
                }
            } else {
                alert('Usuário não encontrado!');
            }
        }

        // Função de recuperação de e-mail
        function recuperarEmail() {
            const usuario = document.getElementById('usuario-recuperacao-email').value;

            const usuarioData = localStorage.getItem(usuario);

            if (usuarioData) {
                const usuarioObjeto = JSON.parse(usuarioData);
                alert('Seu e-mail é: ' + usuarioObjeto.email);
            } else {
                alert('Usuário não encontrado!');
            }
        }

        // Função para voltar ao login
        function voltarLogin() {
            document.getElementById('recuperacao-senha').style.display = 'none';
            document.getElementById('recuperacao-email').style.display = 'none';
            document.getElementById('cadastro').style.display = 'none';
            document.getElementById('login').style.display = 'block';
        }

        // Inicializa a tela de login
        document.getElementById('login').style.display = 'block';
    </script>

</body>

</html>