<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes da Vaga</title>
    <link rel="stylesheet" href="css/detalhes2.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <div class="vaga-detalhe-container">
        <h2 id="vagaNome">Carregando...</h2>
        <p><strong>Descrição:</strong> <span id="vagaDescricao">Carregando...</span></p>
        <p><strong>Contato:</strong> <span id="vagaContato">Carregando...</span></p>
        <p><strong>Benefícios:</strong> <span id="vagaBeneficio">Carregando...</span></p>
        <p><strong>Salário:</strong> <span id="vagaSalario">Carregando...</span></p>
        <p><strong>Requisitos:</strong> <span id="vagaRequisitos">Carregando...</span></p>
        <p><strong>Cidade:</strong> <span id="vagaCidade">Carregando...</span></p>
        <p><strong>Tipo de Trabalho:</strong> <span id="vagaTipoTrabalho">Carregando...</span></p>
        <p><strong>Tipo de Vaga:</strong> <span id="vagaTipoVaga">Carregando...</span></p>

        <!-- Ícones para ações -->
        <div class="acoes">
            <button onclick="window.history.back()" title="Voltar">
                <i class="fas fa-arrow-left"></i> Voltar
            </button>

            <!-- Botão Candidatar-se com redirecionamento -->
            <button id="candidatarVaga" title="Candidatar-se">Candidatar-se</button>

            <i class="fas fa-bookmark" id="salvarVaga" title="Salvar"></i>
            <i class="fas fa-share-alt" id="compartilharVaga" title="Compartilhar"></i>
        </div>
    </div>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const vagaId = urlParams.get('id');

        if (vagaId !== null && vagaId !== '') {
            const listaVagas = JSON.parse(localStorage.getItem('planoProfissional')) || [];

            if (vagaId >= 0 && vagaId < listaVagas.length) {
                const vaga = listaVagas[vagaId];

                document.getElementById('vagaNome').textContent = vaga.nome;
                document.getElementById('vagaDescricao').textContent = vaga.descricao;
                document.getElementById('vagaContato').textContent = vaga.contato;
                document.getElementById('vagaBeneficio').textContent = vaga.beneficio;
                document.getElementById('vagaSalario').textContent = vaga.salario;
                document.getElementById('vagaRequisitos').textContent = vaga.requisitos;
                document.getElementById('vagaCidade').textContent = vaga.cidade;
                document.getElementById('vagaTipoTrabalho').textContent = vaga.tipoTrabalho;
                document.getElementById('vagaTipoVaga').textContent = vaga.tipoVaga;
            } else {
                document.querySelector('.vaga-detalhe-container').innerHTML = '<p>Vaga não encontrada.</p>';
            }
        } else {
            document.querySelector('.vaga-detalhe-container').innerHTML = '<p>Vaga não encontrada.</p>';
        }

        document.getElementById('candidatarVaga').addEventListener('click', function () {
            const nome = document.getElementById('vagaNome').textContent;
            const descricao = document.getElementById('vagaDescricao').textContent;
            const contato = document.getElementById('vagaContato').textContent;
            const cidade = document.getElementById('vagaCidade').textContent;
            const salario = document.getElementById('vagaSalario').textContent;

            const url = `candidatura.html?nome=${encodeURIComponent(nome)}&descricao=${encodeURIComponent(descricao)}&contato=${encodeURIComponent(contato)}&cidade=${encodeURIComponent(cidade)}&salario=${encodeURIComponent(salario)}`;

            window.location.href = url;
        });
    </script>
</body>

</html>
